---
tags:
  - journal-raw
  - devlog
  - spring-boot
created_at: 2025-08-12 08:40
aliases:
  - devlog-spring-boot-day-19-raw
---
## What's my plan for today?
- [ ] continue JPA many to one and many to many
- [ ] finish spring boot

## Devlog
- FetchType
	- annotation element inside relationship annotation
	- Eager -> retrieve all at once
	- Lazy -> only retrieve when needed/accessed
		- needs to be manually retrieved
		- needs to have an existing Hibernate session when related entities are loaded; will error otherwise
			- adding `@Transactional` to service layer when fetching lazy entities will allow you to fetch it
			
	- defaults
		- `@OneToOne` -> eager
		- `@OneToMany` -> lazy
		- `@ManyToOne` -> eager
		- `@ManyToMany` -> lazy
- JpaRepository
	```java
	// Courses.java
	@ManyToOne(etch = FetchType.LAZY)
	@JoinColumn(name = "instructor_id")
	private Instructor instructor;

	// CourseRepository.java
	public interface CourseRepository extends JpaRepository<Course, Integer> {

		List<Course> findByInstructor(Instructor instructor);
	}

	// SchoolServiceImpl.java
	@Override
	public List<Course> getAllCoursesOfInstructor(int instructorId) {
		Instructor instructor = new Instructor();
		instructor.setId(instructorId); 

		return courseRepository.findByInstructor(instructor);
	}

	```
	- method `findBy{Column}` where `{Column}` is a `@Column` field
	- autocomplete also adds the appropriate return type. `List<@Entity>` if it has many to one relationship to `@Column`
	- ![](../../attachments/Pasted%20image%2020250812101400.png)
	```log
	2025-08-12T10:13:11.604+08:00  INFO 4250 --- [schooldb] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/api]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
	2025-08-12T10:13:11.605+08:00  INFO 4250 --- [schooldb] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
	2025-08-12T10:13:11.606+08:00  INFO 4250 --- [schooldb] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
	Instructor()
	setId
	2025-08-12T10:13:11.733+08:00 DEBUG 4250 --- [schooldb] [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.instructor_id,c1_0.title from courses c1_0 where c1_0.instructor_id=?
	2025-08-12T10:13:11.734+08:00 TRACE 4250 --- [schooldb] [nio-8080-exec-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:INTEGER) <- [1]
	Instructor()
	```
	- checked logs and it only seems that the ID is the one only being used in the query
		- this means that maybe no need to pass the exact same instance/object for the `findByColumn` as long as the id or pimary key are the same (mappedBy?)

## What will I do tomorrow?
- 